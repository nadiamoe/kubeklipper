apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "klipper.fullname" . }}-klipper
  labels:
    {{- include "klipper.labels" . | nindent 4 }}
data:
  printer.cfg: |
    # Generated by {{ .Chart.Name }} v{{.Chart.Version}}
    {{- .Values.klipper.config | nindent 4 }}
    {{- if not (.Values.klipper.config | contains "[virtual_sdcard]") }}
    [virtual_sdcard]
    path: /data/gcodes
    {{- end }}
